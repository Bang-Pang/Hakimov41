<Window x:Class="Hakimov41.OrderWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Hakimov41"
        mc:Ignorable="d"
        Title="OrderWindow"
        Height="450" Width="900"
        FontFamily="Comic Sans MS"
        Icon="/res/icon.ico">

    <Grid>
        <!-- строки: шапка, сумма/скидка, товары, пункт выдачи+кнопка -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ШАПКА ЗАКАЗА -->
        <Border Grid.Row="0"
                BorderBrush="Gray"
                BorderThickness="1"
                Padding="15">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="220"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0"
                           Text="Дата формирования заказа:"
                           FontSize="18"/>
                <TextBlock x:Name="OrderDateText"
                           Grid.Row="0" Grid.Column="1"
                           FontSize="18" FontWeight="Bold"/>

                <TextBlock Grid.Row="1" Grid.Column="0"
                           Text="Дата доставки заказа:"
                           FontSize="18"/>
                <DatePicker x:Name="DeliveryDatePicker"
                            Grid.Row="1" Grid.Column="1"
                            FontSize="16"
                            SelectedDateChanged="DeliveryDatePicker_SelectedDateChanged"/>

                <TextBlock Grid.Row="2" Grid.Column="0"
                           Text="ФИО клиента:"
                           FontSize="18"/>
                <TextBlock x:Name="ClientNameText"
                           Grid.Row="2" Grid.Column="1"
                           FontSize="18" FontWeight="Bold"/>

                <TextBlock Grid.Row="3" Grid.Column="0"
                           Text="Номер заказа:"
                           FontSize="18"/>
                <TextBlock x:Name="OrderNumberText"
                           Grid.Row="3" Grid.Column="1"
                           FontSize="18" FontWeight="Bold"/>
            </Grid>
        </Border>

        <!-- СУММА И СКИДКА -->
        <StackPanel Grid.Row="1"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,5,15,5">
            <TextBlock x:Name="TotalSumText"
                       FontSize="16"
                       FontWeight="Bold"
                       Margin="0,0,20,0"
                       Text="Сумма заказа: 0,00 руб."/>
            <TextBlock x:Name="DiscountSumText"
                       FontSize="16"
                       FontWeight="Bold"
                       Text="Сумма скидки: 0,00 руб."/>
        </StackPanel>

        <!-- СПИСОК ТОВАРОВ -->
        <ListView x:Name="OrderItemsListView"
                  Grid.Row="2"
                  Margin="0,5,0,5"
                  ScrollViewer.HorizontalScrollBarVisibility="Disabled">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="LightGray"
                            BorderThickness="0,0,0,1"
                            Padding="10" Margin="0,5">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Фото -->
                            <Image Width="100" Height="100"
                                   Grid.Row="0" Grid.Column="0"
                                   Grid.RowSpan="3"
                                   Stretch="UniformToFill"
                                   HorizontalAlignment="Center">
                                <Image.Source>
                                    <Binding Path="ProductPhotoPath">
                                        <Binding.TargetNullValue>
                                            <ImageSource> /res/picture.png</ImageSource>
                                        </Binding.TargetNullValue>
                                    </Binding>
                                </Image.Source>
                            </Image>

                            <!-- Описание -->
                            <TextBlock Grid.Row="0" Grid.Column="1"
                                       Text="{Binding ProductName}"
                                       FontSize="18" FontWeight="Bold"/>
                            <TextBlock Grid.Row="1" Grid.Column="1"
                                       Text="{Binding ProductDescription}"
                                       FontSize="16" TextWrapping="Wrap"/>
                            <TextBlock Grid.Row="2" Grid.Column="1"
                                       Text="{Binding ProductManufacturer}"
                                       FontSize="16"/>

                            <!-- Цена и количество -->
                            <TextBlock Grid.Row="0" Grid.Column="2"
                                       Text="{Binding ProductCost, StringFormat={}{0} руб.}"
                                       FontSize="18"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>

                            <StackPanel Grid.Row="1" Grid.Column="2"
                                        Orientation="Horizontal"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
                                <Button Content="-"
                                        Width="30" Height="30"
                                        Click="btnMinus_Click"
                                        DataContext="{Binding}"/>
                                <TextBlock Text="{Binding Quantity}"
                                           FontSize="18" FontWeight="Bold"
                                           Width="40" Height="30"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           TextAlignment="Center"/>
                                <Button Content="+"
                                        Width="30" Height="30"
                                        Click="btnPlus_Click"
                                        DataContext="{Binding}"/>
                            </StackPanel>

                            <!-- Скидка -->
                            <TextBlock Grid.Row="2" Grid.Column="2"
                                       Text="{Binding ProductDiscountAmount, StringFormat={}{0}%}"
                                       FontSize="18"
                                       HorizontalAlignment="Center"/>

                            <!-- Удалить -->
                            <Button Grid.Row="0" Grid.Column="4"
                                    Grid.RowSpan="3"
                                    Content="Удалить"
                                    FontSize="12"
                                    BorderThickness="0"
                                    Click="RemoveItem_Click"
                                    DataContext="{Binding}"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    ToolTip="Удалить товар"/>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <!-- ПУНКТ ВЫДАЧИ + КНОПКА -->
        <Grid Grid.Row="3" Margin="0,5,0,5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="Пункт выдачи:"
                       Grid.Row="0" Grid.Column="0"
                       FontSize="18" FontWeight="Bold"
                       Margin="0,0,0,5"/>
            <ComboBox x:Name="PickupPointComboBox"
                      Grid.Row="0" Grid.Column="1"
                      FontSize="16" Height="35"
                      DisplayMemberPath="FullAddress"
                      SelectedValuePath="PickUpPointID"/>

            <Button x:Name="SaveOrderButton"
                    Grid.Row="1" Grid.ColumnSpan="2"
                    Content="Сохранить заказ"
                    Width="150" Height="30"
                    HorizontalAlignment="Center"
                    Margin="0,5,0,0"
                    Click="SaveOrderButton_Click"/>
        </Grid>
    </Grid>
</Window>
